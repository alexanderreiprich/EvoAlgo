(()=>{"use strict";var e={203:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0,t.Field=class{constructor(e){this.squares=[],e?this.setSquares(e):this.createSquares()}getSquares(){return this.squares}setSquares(e){this.squares=e}createSquares(){for(let e=0;e<10;e++){this.squares[e]=new Array;for(let t=0;t<10;t++){let r=Math.floor(16777215*Math.random()).toString(16);this.squares[e][t]=r}}return this.squares}swapSquares(e,t){const r=this.squares[e.x][e.y];let l=this.squares.slice();return l[e.x][e.y]=l[t.x][t.y],l[t.x][t.y]=r,this.setSquares(l),this.squares}}},883:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Fitness=void 0;const l=r(927);t.Fitness=class{calcFitness(){let e=0,t=l.field.getSquares();for(let r=0;r<t.length;r++)for(let l=0;l<t[r].length-1;l++)e+=this.averageColorDistance(t,r,l);return document.getElementById("fitness").innerHTML="Fitness: "+e.toFixed(4),e}hexToRGB(e){let t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}calcColorDistance(e,t){const r=e[0]-t[0],l=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(r*r+l*l+s*s)}averageColorDistance(e,t,r){const l=[[0,1],[1,0],[0,-1],[-1,0],[-1,-1],[-1,1],[1,-1],[1,1]];let s=this.hexToRGB(e[t][r]),n=0,a=0;for(let[i,o]of l){let l=t+i,u=r+o;if(l>=0&&l<e.length&&u>=0&&u<e[0].length){let t=this.hexToRGB(e[l][u]);n+=this.calcColorDistance(s,t),a++}}return 0===a?0:n/a}}},416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HillClimber=void 0;const l=r(203);t.HillClimber=class{hillclimber(e,t,r,l){let s=0,n=this.createCandidate(r),a=e(n);for(console.log(n.toString()+" - Gen: "+s+", Rating: "+e(n));a!=r&&s<l;){s++,a=e(n);let r=t(n);e(r)>a&&(n=r,console.log(n.toString()+" - Gen: "+s+", Rating: "+e(n)))}}createCandidate(e){let t=[];for(let r=0;r<e;r++)t[r]=Math.round(Math.random());return t}createInitialPopulation(){let e=new l.Field,t=[];for(let r=0;r<3;r++){let r=new l.Field(e.getSquares());for(let e=0;e<100;e++){let e=this.chooseRandomTile(),t=this.chooseRandomTile();r.swapSquares(e,t)}t.push(r)}return t}chooseRandomTile(){return{x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())}}rateCandidate(e){for(let t=0;t<e.length;t++)if(1==e[t])return t;return e.length}rateCandidateBalanced(e){let t=this.rateCandidate(e),r=0;for(let t=0;t<e.length;t++)1==e[t]&&r++;return Math.min(t,r)}mutateCandidate(e){let t=e.slice(),r=Math.floor(Math.random()*e.length);return t[r]=1-e[r],t}mutateCandidateProbability(e){let t=e.slice();for(let r=0;r<e.length;r++)Math.random()<1/e.length&&(t[r]=1-e[r]);return t}}},927:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.field=void 0;const l=r(883),s=r(203),n=r(416),a=u("squares");u("resetBtn").addEventListener("click",(function(){const e=localStorage.getItem("squares");t.field=e?JSON.parse(e):t.field.createSquares(),d()})),t.field=new s.Field,localStorage.setItem("squares",JSON.stringify(t.field));let i={x:-1,y:-1},o=new l.Fitness;function u(e){return document.getElementById(e)}function c(e){if(-1==i.x&&-1==i.y)i=e,u(i.x+""+i.y).className="selected";else{let r=e;u(i.x+""+i.y).className="",u(r.x+""+r.y).className="",t.field.swapSquares(i,r),i={x:-1,y:-1},d()}}function d(){!function(){let e=t.field.getSquares();a.innerHTML="";for(let t=0;t<e.length;t++){let r=document.createElement("div");null==a||a.appendChild(r);for(let r=0;r<e[t].length;r++){let l=document.createElement("div");l.id=t+""+r,l.style.backgroundColor="#"+e[t][r],l.addEventListener("click",(function(){c({x:Number(this.id.charAt(0)),y:Number(this.id.charAt(1))})})),null==a||a.children[t].appendChild(l)}}}(),o.calcFitness()}d();let h=new n.HillClimber;console.log(h.createInitialPopulation())}},t={};!function r(l){var s=t[l];if(void 0!==s)return s.exports;var n=t[l]={exports:{}};return e[l](n,n.exports,r),n.exports}(927)})();