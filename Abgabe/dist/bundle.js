(()=>{"use strict";var e={203:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0,t.Field=class{constructor(e){this.squares=[],e?this.setSquares(e):this.createSquares()}getSquares(){return this.squares.map((e=>e.slice()))}setSquares(e){this.squares=e}createSquares(){for(let e=0;e<10;e++){this.squares[e]=new Array;for(let t=0;t<10;t++){let r=Math.floor(16777215*Math.random()).toString(16);this.squares[e][t]=r}}return this.squares}swapSquares(e,t){const r=this.squares.map((e=>e.slice()));return this.squares[e.x][e.y]=this.squares[t.x][t.y].slice(),this.squares[t.x][t.y]=r[e.x][t.y],this.squares}}},883:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Fitness=void 0;const s=r(927);t.Fitness=class{calcFitness(){let e=0,t=s.field.getSquares();for(let r=0;r<t.length;r++)for(let s=0;s<t[r].length-1;s++)e+=this.averageColorDistance(t,r,s);return document.getElementById("fitness").innerHTML="Fitness: "+e.toFixed(4),e}hexToRGB(e){let t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}calcColorDistance(e,t){const r=e[0]-t[0],s=e[1]-t[1],l=e[2]-t[2];return Math.sqrt(r*r+s*s+l*l)}averageColorDistance(e,t,r){const s=[[0,1],[1,0],[0,-1],[-1,0],[-1,-1],[-1,1],[1,-1],[1,1]];let l=this.hexToRGB(e[t][r]),a=0,n=0;for(let[i,o]of s){let s=t+i,c=r+o;if(s>=0&&s<e.length&&c>=0&&c<e[0].length){let t=this.hexToRGB(e[s][c]);a+=this.calcColorDistance(l,t),n++}}return 0===n?0:a/n}}},416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HillClimber=void 0;const s=r(203);t.HillClimber=class{hillclimber(e,t,r,s){let l=0,a=this.createCandidate(r),n=e(a);for(console.log(a.toString()+" - Gen: "+l+", Rating: "+e(a));n!=r&&l<s;){l++,n=e(a);let r=t(a);e(r)>n&&(a=r,console.log(a.toString()+" - Gen: "+l+", Rating: "+e(a)))}}createCandidate(e){let t=[];for(let r=0;r<e;r++)t[r]=Math.round(Math.random());return t}createInitialPopulation(){let e=new s.Field,t=[e];for(let r=0;r<3;r++){let r=new s.Field(e.getSquares());for(let e=0;e<100;e++){let e=this.chooseRandomTile(),t=this.chooseRandomTile();console.log(r.getSquares()),r.swapSquares(e,t),console.log(r.getSquares())}t.push(r)}return t}chooseRandomTile(){return{x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())}}rateCandidate(e){for(let t=0;t<e.length;t++)if(1==e[t])return t;return e.length}rateCandidateBalanced(e){let t=this.rateCandidate(e),r=0;for(let t=0;t<e.length;t++)1==e[t]&&r++;return Math.min(t,r)}mutateCandidate(e){let t=e.slice(),r=Math.floor(Math.random()*e.length);return t[r]=1-e[r],t}mutateCandidateProbability(e){let t=e.slice();for(let r=0;r<e.length;r++)Math.random()<1/e.length&&(t[r]=1-e[r]);return t}}},927:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.field=void 0;const s=r(883),l=r(203),a=r(416),n=c("squares");c("resetBtn").addEventListener("click",(function(){const e=localStorage.getItem("squares");t.field=e?JSON.parse(e):t.field.createSquares(),d()})),t.field=new l.Field,localStorage.setItem("squares",JSON.stringify(t.field));let i={x:-1,y:-1},o=new s.Fitness;function c(e){return document.getElementById(e)}function u(e){if(-1==i.x&&-1==i.y)i=e,c(i.x+""+i.y).className="selected";else{let r=e;c(i.x+""+i.y).className="",c(r.x+""+r.y).className="",t.field.swapSquares(i,r),i={x:-1,y:-1},d()}}function d(){!function(){let e=t.field.getSquares();n.innerHTML="";for(let t=0;t<e.length;t++){let r=document.createElement("div");null==n||n.appendChild(r);for(let r=0;r<e[t].length;r++){let s=document.createElement("div");s.id=t+""+r,s.style.backgroundColor="#"+e[t][r],s.addEventListener("click",(function(){u({x:Number(this.id.charAt(0)),y:Number(this.id.charAt(1))})})),null==n||n.children[t].appendChild(s)}}}(),o.calcFitness()}d();let h=new a.HillClimber;console.log(h.createInitialPopulation())}},t={};!function r(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}(927)})();